@model IEnumerable<Student>

@{
    ViewData["Title"] = "Student Page";

    var students = @Model.Select(s => new {
        s.Id,
        s.SchoolId,
        Name = string.Join(" ", s.FirstName, s.LastName),
        YearLevelAndSection = string.Concat(s.YearLevel, s.Section),
        s.Program,
        s.Department
    });
}

<div>
    <h1>Student Page</h1>
</div>

<div class="mb-4">
    <form class="form-group form-inline" asp-action="Index">
        <div class="input-group">
            <input type="text" name="searchParam" class="form-control" value="@ViewData["CurrentSortString"]"
                placeholder="Search students...">
            <div class="input-group-append">
                <button type="submit" class="btn btn-primary">Submit</button>
            </div>
        </div>
    </form>
</div>

<div class="mt-3">
    <div class="d-flex justify-content-between align-items-center mb-1">
        <div>
            <h3 class="text-display">List of Students</h3>
        </div>
        <div>
            <a class="btn btn-primary mr-2" asp-action="CreateStudent" asp-controller="Student">Create Student</a>
            <button class="btn btn-primary">View Statistics</button>
        </div>
    </div>
    <table class="table table-bordered table-sm table-hover">
        <thead>
            <tr>
                <th><a asp-action="Index" asp-controller="Student"
                        asp-route-sortParam="@ViewData["IdSortParam"]">Student Id</a></th>
                <th><a asp-action="Index" asp-controller="Student" asp-route-sortParam="@ViewData["NameSortParam"]">Full
                        Name</a></th>
                <th><a asp-action="Index" asp-controller="Student"
                        asp-route-sortParam="@ViewData["YearAndSectionSortParam"]">Year and Section</a></th>
                <th><a asp-action="Index" asp-controller="Student"
                        asp-route-sortParam="@ViewData["ProgramSortParam"]">Program</a></th>
                <th><a asp-action="Index" asp-controller="Student"
                        asp-route-sortParam="@ViewData["DepartmentSortParam"]">Department Id</a></th>
            </tr>
        </thead>
        <tbody>
            @if (students.Count() == 0 || students.Any() == false)
            {
                <tr>
                    <td colspan="5" class="text-center">No student records</td>
                </tr>
            }
            @foreach (var s in students)
            {
                <tr onclick="GoToStudentView('@s.Id')">
                    <td>@s.SchoolId</td>
                    <td>@s.Name</td>
                    <td>@s.YearLevelAndSection</td>
                    <td>@s.Program</td>
                    <td>@s.Department</td>
                </tr>
            }
        </tbody>
    </table>
</div>

<script>
    function GoToStudentView(studentId)
    {
         window.location.href = '@Url.Action("ViewStudent", "Student")' + '?itemid=' + studentId;
    }
</script>